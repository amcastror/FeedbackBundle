// Generated by CoffeeScript 1.10.0
(function() {
  var feedback;

  $(document).ready(function() {
    var buttons;
    buttons = {
      remove: $(".feedback-delete"),
      mark_as_read: $(".feedback-mark-as-read"),
      mark_as_done: $(".feedback-mark-as-done"),
      show_content: $(".feedback-show-content")
    };
    buttons.remove.on('click', function(e) {
      e.preventDefault();
      return feedback.remove($(this).attr('href'));
    });
    buttons.mark_as_done.on('click', function(e) {
      e.preventDefault();
      return feedback.mark_as.done($(this).attr('href'));
    });
    buttons.mark_as_read.on('click', function(e) {
      e.preventDefault();
      return feedback.mark_as.read($(this).attr('href'));
    });
    buttons.show_content.on('click', function() {
        console.log(1);
      return feedback.show_content($(this).data('content-id'));
    });
  });

  feedback = {
    remove: function(href) {
      var sure;
      sure = confirm("Are you sure?");
      if (!sure) {
        return false;
      }
      $.ajax({
        url: "" + href,
        type: "DELETE",
        dataType: 'json',
        success: function(rd) {
          if (rd.status) {
            return document.location.reload();
          } else {
            return alert('An error has occured');
          }
        }
      });
      return false;
    },
    show_content: function(id) {
      $("#entity_" + id).slideToggle();
      return false;
    },
    mark_as: {
      read: function(href) {
        $.ajax({
          url: "" + href,
          type: "GET",
          dataType: "json",
          success: function(rd) {
            if (rd.status) {
              return document.location.reload();
            } else {
              return alert('An error has occured');
            }
          }
        });
        return false;
      },
      done: function(href) {
        $.ajax({
          url: "" + href,
          type: "GET",
          dataType: "json",
          success: function(rd) {
            if (rd.status) {
              return document.location.reload();
            } else {
              return alert('An error has occured');
            }
          }
        });
        return false;
      }
    }
  };

}).call(this);
